"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[365],{4993:(e,t,n)=>{n.d(t,{Zo:()=>u,kt:()=>k});var a=n(2983);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),p=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},u=function(e){var t=p(e.components);return a.createElement(s.Provider,{value:t},e.children)},d="mdxType",c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},m=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,u=l(e,["components","mdxType","originalType","parentName"]),d=p(n),m=r,k=d["".concat(s,".").concat(m)]||d[m]||c[m]||i;return n?a.createElement(k,o(o({ref:t},u),{},{components:n})):a.createElement(k,o({ref:t},u))}));function k(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=m;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l[d]="string"==typeof e?e:r,o[1]=l;for(var p=2;p<i;p++)o[p]=n[p];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}m.displayName="MDXCreateElement"},4870:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>l,toc:()=>p});var a=n(2798),r=(n(2983),n(4993));const i={sidebar_position:0,sidebar_label:"Concepts"},o="Concepts and definitions",l={unversionedId:"concepts",id:"concepts",title:"Concepts and definitions",description:"The library gives you a piece of state in the memory and gives you full control",source:"@site/docs/concepts.md",sourceDirName:".",slug:"/concepts",permalink:"/react-async-states/docs/concepts",draft:!1,editUrl:"https://github.com/incepter/react-async-states/edit/main/packages/docs/docs/concepts.md",tags:[],version:"current",sidebarPosition:0,frontMatter:{sidebar_position:0,sidebar_label:"Concepts"},sidebar:"tutorialSidebar",previous:{title:"Intro",permalink:"/react-async-states/docs/intro"},next:{title:"First steps",permalink:"/react-async-states/docs/tutorial/first-steps"}},s={},p=[{value:"The state",id:"the-state",level:2},{value:"The producer",id:"the-producer",level:2},{value:"The <code>source</code> object",id:"the-source-object",level:2},{value:"How my app will look like with the library:",id:"how-my-app-will-look-like-with-the-library",level:3}],u={toc:p};function d(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,a.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"concepts-and-definitions"},"Concepts and definitions"),(0,r.kt)("p",null,"The library gives you a piece of state in the memory and gives you full control\nover it."),(0,r.kt)("h2",{id:"the-state"},"The state"),(0,r.kt)("p",null,"The library's state value is composed of four properties:"),(0,r.kt)("table",null,(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:null},"Property"),(0,r.kt)("th",{parentName:"tr",align:null},"Type"),(0,r.kt)("th",{parentName:"tr",align:null},"Description"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"data")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"T")),(0,r.kt)("td",{parentName:"tr",align:null},"The returned data from the ",(0,r.kt)("inlineCode",{parentName:"td"},"producer function"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"status")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"initial,pending,success,error,aborted")),(0,r.kt)("td",{parentName:"tr",align:null},"The status of the state")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"props")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"ProducerProps")),(0,r.kt)("td",{parentName:"tr",align:null},"The argument object that the producer was ran with (the ",(0,r.kt)("inlineCode",{parentName:"td"},"props"),")")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"timestamp")),(0,r.kt)("td",{parentName:"tr",align:null},(0,r.kt)("inlineCode",{parentName:"td"},"number")),(0,r.kt)("td",{parentName:"tr",align:null},"the time (",(0,r.kt)("inlineCode",{parentName:"td"},"Date.now()"),") where the state was constructed")))),(0,r.kt)("p",null,"Using typescript, the state has 4 generic types for now:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"type State<TData, TError, TReason, TArgs> = {}\n")),(0,r.kt)("p",null,"Where:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TData"),": Refers to the type of the data when ",(0,r.kt)("inlineCode",{parentName:"li"},"success")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TError"),": Refers to the type of the Error when ",(0,r.kt)("inlineCode",{parentName:"li"},"error")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TReason"),": Refers to the type of the Abort reason when ",(0,r.kt)("inlineCode",{parentName:"li"},"aborted")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"TArgs"),": Refers to the type of the ",(0,r.kt)("inlineCode",{parentName:"li"},"args")," that we will use to run our producer.")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"The ",(0,r.kt)("inlineCode",{parentName:"li"},"data")," property has a ",(0,r.kt)("inlineCode",{parentName:"li"},"null")," value when ",(0,r.kt)("inlineCode",{parentName:"li"},"pending")),(0,r.kt)("li",{parentName:"ul"},"The type of the state goes along with the status:")),(0,r.kt)("p",{parentName:"admonition"},"The following example declares a producer that will perform the login of our user,\nwhile:"),(0,r.kt)("ul",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ul"},"In case of success, the type is ",(0,r.kt)("inlineCode",{parentName:"li"},"User")),(0,r.kt)("li",{parentName:"ul"},"In case of pending, data is ",(0,r.kt)("inlineCode",{parentName:"li"},"null")),(0,r.kt)("li",{parentName:"ul"},"In case of error, the type is ",(0,r.kt)("inlineCode",{parentName:"li"},"Error")),(0,r.kt)("li",{parentName:"ul"},"In case of aborted, the type is ",(0,r.kt)("inlineCode",{parentName:"li"},'"Timeout"')),(0,r.kt)("li",{parentName:"ul"},"In case of initial, the type is ",(0,r.kt)("inlineCode",{parentName:"li"},"User | undefined"))),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},'type User = { username: string, password: string };\n\nfunction loginProducer(\n  props: ProducerProps<User, Error, "Timeout", [string, string]>\n): Promise<User> {\n  if (!props.args[0]) throw new Error("username is required");\n  // let id = setTimeout(() => props.abort("Timeout"), 15000)\n  // props.onAbort(() => clearTimeout(id))\n  return login({\n    username: props.args[0], // <- string\n    password: props.args[0], // <- string\n  })\n}\n\nlet {state, runc} = useAsyncState(producer);\nif (state.status === Status.initial) {\n  let data = state.data; // type of data: User | undefined\n}\nif (state.status === Status.pending) {\n  let data = state.data; // type of data: null\n}\nif (state.status === Status.success) {\n  let data = state.data; // type of data: User\n}\nif (state.status === Status.error) {\n  let data = state.data; // type of data: Error\n}\nif (state.status === Status.aborted) {\n  let data = state.data; // type of data: "Timeout"\n}\n'))),(0,r.kt)("h2",{id:"the-producer"},"The producer"),(0,r.kt)("p",null,"The producer function is a javascript function, and it is responsible for\nreturning the state's ",(0,r.kt)("inlineCode",{parentName:"p"},"data"),"."),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-typescript"},"// T: data type, E: error type, R: abort reason type, A type of props.args\nexport type Producer<T, E, R, A extends unknown[]> =\n        ((props: ProducerProps<T, E, R, A>) => (T | Promise<T> | Generator<any, T, any>));\n")),(0,r.kt)("p",null,"It may be:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"A regular function returning a ",(0,r.kt)("inlineCode",{parentName:"li"},"Promise")," or ",(0,r.kt)("inlineCode",{parentName:"li"},"thenable")," object."),(0,r.kt)("li",{parentName:"ul"},"A regular function returning a value (reducers, async reducers, mixed...)."),(0,r.kt)("li",{parentName:"ul"},"An asynchronous function with ",(0,r.kt)("inlineCode",{parentName:"li"},"async/await")," syntax."),(0,r.kt)("li",{parentName:"ul"},"A ",(0,r.kt)("inlineCode",{parentName:"li"},"generator")," (sagas...)."),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"undefined")," to replace the state synchronously any time with the desired value.")),(0,r.kt)("admonition",{type:"note"},(0,r.kt)("p",{parentName:"admonition"},"1- The library supports synchronous states as well."),(0,r.kt)("p",{parentName:"admonition"},"If the producer function returns a value besides a ",(0,r.kt)("inlineCode",{parentName:"p"},"Promise")," or a ",(0,r.kt)("inlineCode",{parentName:"p"},"Generator"),",\nit is considered synchronous and pass directly to ",(0,r.kt)("inlineCode",{parentName:"p"},"success")," or ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," state."),(0,r.kt)("p",{parentName:"admonition"},"2- The producer's execution is wrapped inside try catch block, so any thrown\nerror will be received as state with ",(0,r.kt)("inlineCode",{parentName:"p"},"error")," status:"),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-javascript"},'state = {\n  data: e,// the catched error\n  status: "error",\n  props: {}, // the producer\'s parameter when it was ran\n  timestamp: 123,\n}\n'))),(0,r.kt)("h2",{id:"the-source-object"},"The ",(0,r.kt)("inlineCode",{parentName:"h2"},"source")," object"),(0,r.kt)("p",null,"This is a special object obtained from either the library hooks as a named\nproperty, or via ",(0,r.kt)("inlineCode",{parentName:"p"},"createSource"),"."),(0,r.kt)("p",null,"It is a token having all the necessary methods to have full control over\nthe state with its linked producer."),(0,r.kt)("p",null,(0,r.kt)("a",{parentName:"p",href:"/docs/api/the-whole-api#createsource"},"Here is a quick"),"\noverview of this source object."),(0,r.kt)("h3",{id:"how-my-app-will-look-like-with-the-library"},"How my app will look like with the library:"),(0,r.kt)("p",null,"In general, here how you will be using the library:"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"First you define your producer function (aka: reducer, saga, thunk...)\nand give it its unique name. This function shall\nreceive a powerful single argument object called the ",(0,r.kt)("inlineCode",{parentName:"li"},"props")," (or ",(0,r.kt)("inlineCode",{parentName:"li"},"argv"),").\nThis function may take any of the supported forms."),(0,r.kt)("li",{parentName:"ul"},"Later, from any point in your app, you can use ",(0,r.kt)("inlineCode",{parentName:"li"},"useAsyncState(key)"),"\nor ",(0,r.kt)("inlineCode",{parentName:"li"},"useSelector(key)")," to get the state based on your needs.")))}d.isMDXComponent=!0}}]);